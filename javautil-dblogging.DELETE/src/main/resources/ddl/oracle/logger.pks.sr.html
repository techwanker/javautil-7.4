<p>set echo on</p>
<pre><code>create or replace PACKAGE logger AS
    G_SEVERE       CONSTANT PLS_INTEGER := 1 ;
    G_WARNING      CONSTANT PLS_INTEGER := 2 ;
    G_INFO         CONSTANT PLS_INTEGER := 4 ;
    G_SNAP         CONSTANT PLS_INTEGER := 5 ;
    G_ENTERING     CONSTANT PLS_INTEGER := 6 ;
    G_EXITING      CONSTANT PLS_INTEGER := 6 ;
    G_FINE         CONSTANT PLS_INTEGER := 7 ;
    G_FINER        CONSTANT PLS_INTEGER := 8 ;
    G_FINEST       CONSTANT PLS_INTEGER := 9 ;
    G_NONE         CONSTANT PLS_INTEGER := 10 ;</code></pre>
<pre><code>    function format_time(p_timestamp in timestamp) 
    return varchar;</code></pre>
<pre><code>    function get_new_job_log_id 
    return number;</code></pre>
<h1 id="logging">Logging</h1>
<h2 id="specify-log-destination">Specify log destination</h2>
<pre><code>    procedure begin_log ( 
        logfile_name   in varchar,
        logfile_directory in varchar default &#39;JOB_MSG_DIR&#39;,
        p_process_name in varchar default null,
        p_log_set      in varchar default null,
        p_classname    in varchar default null,
        p_module_name  in varchar default null,
        p_status_msg   in varchar default null,
        p_thread_name  in varchar default null,
        p_log_level    in pls_integer default G_INFO,
        p_trace_level  in pls_integer default G_INFO);</code></pre>
<h2 id="filter">Filter</h2>
<pre><code>    procedure set_caller_level(name in varchar ,  
                              level in pls_integer);</code></pre>
<h2 id="log">Log</h2>
<pre><code>    procedure log (
      p_log_msg      in   varchar,
      p_log_level    in   pls_integer default g_info,
      p_dump_stack   in   boolean default false
   );</code></pre>
<h1 id="job">job</h1>
<h2 id="begin_job">begin_job</h2>
<pre><code>   FUNCTION begin_job ( 
        p_process_name in varchar,
        p_log_set      in varchar default null,
        p_classname    in varchar default null,
        p_module_name  in varchar default null,
        p_status_msg   in varchar default null,
        p_thread_name  in varchar default null,
        logfile_name   in varchar default null,
        logfile_directory in varchar default &#39;JOB_MSG_DIR&#39;,
        p_log_level    in pls_integer default G_INFO,
        p_trace_level  in pls_integer default G_INFO)
        return varchar;</code></pre>
<h2 id="start-step">start step</h2>
<pre><code>   function job_step_insert (
        p_step_name   in varchar, 
        p_step_info   in varchar default null, 
        p_classname   in varchar default null,     
        p_stacktrace  in varchar default null
   ) return number;</code></pre>
<h2 id="finish-step">finish step</h2>
<pre><code>   procedure job_step_finish (step_id in number);</code></pre>
<h2 id="finish-job">Finish job</h2>
<pre><code>    procedure end_job;</code></pre>
<h2 id="abort-job">Abort job</h2>
<pre><code>    procedure abort_job(exception_msg in varchar default null,
        stacktrace in varchar default null);</code></pre>
<h1 id="todo">TODO</h1>
<pre><code>    procedure set_action (p_action in        varchar) ;</code></pre>
<pre><code>    procedure set_module (
        p_module_name in        varchar,
        p_action_name in   varchar
    );</code></pre>
<h1 id="sql-trace">sql trace</h1>
<pre><code>    function get_tracefile(p_file_name in varchar) 
    return clob;</code></pre>
<pre><code>    function get_my_tracefile_name 
    return varchar;</code></pre>
<pre><code>    function set_tracefile_identifier(p_job_nbr in number) 
    return varchar;</code></pre>
<pre><code>    function get_my_tracefile 
    return clob ;</code></pre>
<h1 id="misc">misc</h1>
<pre><code>    function basename (p_full_path in varchar,
                       p_suffix    in varchar default null,
                       p_separator in char default &#39;/&#39;) 
    return varchar;</code></pre>
<pre><code>    procedure prepare_connection;</code></pre>
<pre><code>    procedure trace_step(p_step_name in varchar, p_job_step_id in number);</code></pre>
<pre><code>    function get_directory_path 
    return varchar;</code></pre>
<pre><code>    procedure set_debug(debug boolean default true) ;</code></pre>
<p>END logger; / show errors</p>
